{"ast":null,"code":"var _jsxFileName = \"/Users/vrajmehta/Downloads/Downloads/React:JavaScript/AIP_IOU/client/src/components/AddFriend/Index.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Button, message, Input, InputNumber } from 'antd';\nimport { FaCoffee } from 'react-icons/fa';\nimport { GiChocolateBar, GiCupcake } from 'react-icons/gi';\nimport { FaLeaf, FaPizzaSlice } from 'react-icons/fa';\nimport { UserOutlined, PlusOutlined } from '@ant-design/icons';\nimport { Link } from 'react-router-dom';\nimport cookie from 'react-cookies';\nconst {\n  Search\n} = Input;\n\nclass AddFriend extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user_owes: '',\n      searchKey: '',\n      proof: '',\n      user_owned: '',\n      rewardsEnum: [],\n      rewardname: '',\n      rewardqty: 1\n    };\n  }\n\n  componentDidMount() {\n    //get login status from cookie\n    let loginID = cookie.load(\"user_id\");\n\n    if (loginID) {\n      this.setState({\n        user_owned: loginID,\n        rewardsEnum: []\n      });\n    } // pull rewardsEnum\n\n\n    let responseData;\n    axios.get(`https://aip-v1.ts.r.appspot.com/api/rewards`).then(response => {\n      responseData = response.data;\n      responseData.forEach(item => {\n        this.setState({\n          rewardsEnum: this.state.rewardsEnum.concat({\n            \"name\": item.reward_name,\n            \"qty\": 0\n          })\n        });\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  handleSearch() {\n    const searchkey = this.state.searchKey;\n\n    if (searchkey == \"\") {\n      message.error(\"Blank User cant be searched\");\n    } else {\n      axios.get(`https://aip-v1.ts.r.appspot.com/api/users/?username=${searchkey}`).then(response => {\n        let searcheduser = response.data.users[0].user_id;\n        message.success(\"User Found!\");\n        this.setState({\n          user_owes: searcheduser\n        });\n      }).catch(e => {\n        message.error(\"User Doesn't Exist! Please Try again!\");\n        console.log(e);\n      });\n    }\n  }\n\n  onSearchKeyChange(e) {\n    this.setState({\n      searchKey: e.target.value\n    });\n  }\n\n  onChangeRadio(e) {\n    this.setState({\n      user_owes: e.target.value\n    });\n  }\n\n  onChangeProof(e) {\n    this.setState({\n      proof: e.target.value\n    });\n  }\n\n  onChangeQty(e, Itemname) {\n    let rewardsEnum = this.state.rewardsEnum;\n    rewardsEnum.forEach(item => {\n      console.log(item.name);\n\n      if (item.name == Itemname) {\n        item.qty = e;\n      }\n    });\n    this.setState({\n      rewardsEnum: rewardsEnum\n    });\n  }\n\n  addFavour() {\n    const user_owes = this.state.user_owes;\n    const user_owned = this.state.user_owned;\n    const proof = this.state.proof;\n    let responseMessage; // API parameters\n    // save rewards whose count is more than 0\n\n    let rewardsEnum = this.state.rewardsEnum;\n    let newRewardsEnum = [];\n    let rewards = [];\n    rewardsEnum.forEach(item => {\n      if (item.qty > 0) {\n        newRewardsEnum = newRewardsEnum.concat({\n          \"name\": item.name,\n          \"qty\": item.qty\n        });\n      }\n    });\n\n    if (newRewardsEnum.length == 0) {\n      message.error(\"You have to choose at least one favour first\");\n    } else {\n      newRewardsEnum.forEach(item => {\n        switch (item.name) {\n          case \"chocolate\":\n            item.name = \"Chocolate\";\n            break;\n\n          case \"coffee\":\n            item.name = \"Coffee\";\n            break;\n\n          case \"mint\":\n            item.name = \"Mint\";\n            break;\n\n          case \"cupcake\":\n            item.name = \"Cupcake\";\n            break;\n\n          case \"pizza\":\n            item.name = \"Pizza\";\n            break;\n        }\n      });\n      newRewardsEnum.forEach(currentfavor => {\n        let ItemChanged = false;\n        rewards.forEach(oldFavour => {\n          if (currentfavor.name == oldFavour.name) {\n            oldFavour.qty += currentfavor.qty;\n            ItemChanged = true;\n          }\n        });\n\n        if (ItemChanged == false) {\n          rewards = rewards.concat(currentfavor);\n        }\n      });\n    }\n\n    if (user_owes == \"\") {\n      message.error(\"Please search the user before adding.!\");\n    } else {\n      let data = {\n        \"user_owes\": user_owes,\n        \"user_owed\": user_owned,\n        \"proof\": proof,\n        \"reward\": rewards\n      };\n      axios.post('https://aip-v1.ts.r.appspot.com/api/favours/add_transaction', data).then(response => {\n        responseMessage = response.data.message;\n        message.success(responseMessage);\n      }).catch(e => {\n        console.log(e);\n      });\n    }\n  }\n\n  render() {\n    let self = this;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 17\n      }\n    }, \"Search the Username\"), /*#__PURE__*/React.createElement(Search, {\n      placeholder: \"Search\",\n      onChange: this.onSearchKeyChange.bind(this),\n      onSearch: this.handleSearch.bind(this),\n      style: {\n        width: \"30vh\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }\n    }, \"Choose Favour?\"), /*#__PURE__*/React.createElement(\"div\", {\n      onChange: this.onChangeRadio.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"radio\",\n      value: this.state.user_owes,\n      name: \"Favour\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 21\n      }\n    }), \" Owes \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 92\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"radio\",\n      value: this.state.user_owned,\n      name: \"Favour\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 21\n      }\n    }), \" Owned\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }\n    }, \"Select if proof is need or not?\"), /*#__PURE__*/React.createElement(\"div\", {\n      onChange: this.onChangeProof.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"radio\",\n      value: \"1\",\n      name: \"Proof\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 21\n      }\n    }), \" Yes \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 71\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"radio\",\n      value: \"0\",\n      name: \"Proof\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 21\n      }\n    }), \" No\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }\n    }, \"Select the Favour OWed or Owned\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addRewards\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addRewards-rewardsOption\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 25\n      }\n    }, this.state.rewardsEnum.map(function (item) {\n      let itemName = item.name;\n\n      switch (itemName) {\n        case \"Chocolate\":\n        case \"chocolate\":\n          return /*#__PURE__*/React.createElement(\"li\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 49\n            }\n          }, /*#__PURE__*/React.createElement(GiChocolateBar, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 55\n            }\n          }), \" \", itemName), /*#__PURE__*/React.createElement(InputNumber, {\n            defaultValue: 0,\n            onChange: e => self.onChangeQty(e, itemName),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 50\n            }\n          }));\n\n        case \"Coffee\":\n        case \"coffee\":\n          return /*#__PURE__*/React.createElement(\"li\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 49\n            }\n          }, /*#__PURE__*/React.createElement(FaCoffee, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 55\n            }\n          }), \" \", itemName), /*#__PURE__*/React.createElement(InputNumber, {\n            defaultValue: 0,\n            onChange: e => self.onChangeQty(e, itemName),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 49\n            }\n          }));\n\n        case \"Cupcake\":\n        case \"cupcake\":\n          return /*#__PURE__*/React.createElement(\"li\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 49\n            }\n          }, /*#__PURE__*/React.createElement(GiCupcake, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 55\n            }\n          }), \" \", itemName), /*#__PURE__*/React.createElement(InputNumber, {\n            defaultValue: 0,\n            onChange: e => self.onChangeQty(e, itemName),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 49\n            }\n          }));\n\n        case \"Mint\":\n        case \"mint\":\n          return /*#__PURE__*/React.createElement(\"li\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 49\n            }\n          }, /*#__PURE__*/React.createElement(FaLeaf, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 55\n            }\n          }), \" \", itemName), /*#__PURE__*/React.createElement(InputNumber, {\n            defaultValue: 0,\n            onChange: e => self.onChangeQty(e, itemName),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 49\n            }\n          }));\n\n        case \"Pizza\":\n        case \"pizza\":\n          return /*#__PURE__*/React.createElement(\"li\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 49\n            }\n          }, /*#__PURE__*/React.createElement(FaPizzaSlice, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 55\n            }\n          }), \" \", itemName), /*#__PURE__*/React.createElement(InputNumber, {\n            defaultValue: 0,\n            onChange: e => self.onChangeQty(e, itemName),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 49\n            }\n          }));\n      }\n    })))), /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      onClick: this.addFavour.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 17\n      }\n    }, \"Add Favour\"));\n  }\n\n}\n\nexport default AddFriend;","map":{"version":3,"sources":["/Users/vrajmehta/Downloads/Downloads/React:JavaScript/AIP_IOU/client/src/components/AddFriend/Index.js"],"names":["React","axios","Button","message","Input","InputNumber","FaCoffee","GiChocolateBar","GiCupcake","FaLeaf","FaPizzaSlice","UserOutlined","PlusOutlined","Link","cookie","Search","AddFriend","Component","constructor","props","state","user_owes","searchKey","proof","user_owned","rewardsEnum","rewardname","rewardqty","componentDidMount","loginID","load","setState","responseData","get","then","response","data","forEach","item","concat","reward_name","catch","e","console","log","handleSearch","searchkey","error","searcheduser","users","user_id","success","onSearchKeyChange","target","value","onChangeRadio","onChangeProof","onChangeQty","Itemname","name","qty","addFavour","responseMessage","newRewardsEnum","rewards","length","currentfavor","ItemChanged","oldFavour","post","render","self","bind","width","map","itemName"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,EAAiBC,OAAjB,EAA0BC,KAA1B,EAAgCC,WAAhC,QAAmD,MAAnD;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,SAASC,cAAT,EAAyBC,SAAzB,QAA0C,gBAA1C;AACA,SAASC,MAAT,EAAiBC,YAAjB,QAAqC,gBAArC;AACA,SAASC,YAAT,EAAuBC,YAAvB,QAA2C,mBAA3C;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AAEA,MAAM;AAAEC,EAAAA;AAAF,IAAaX,KAAnB;;AAEA,MAAMY,SAAN,SAAwBhB,KAAK,CAACiB,SAA9B,CAAwC;AAEpCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,SAAS,EAAE,EADF;AAETC,MAAAA,SAAS,EAAE,EAFF;AAGTC,MAAAA,KAAK,EAAE,EAHE;AAITC,MAAAA,UAAU,EAAE,EAJH;AAKTC,MAAAA,WAAW,EAAE,EALJ;AAMTC,MAAAA,UAAU,EAAC,EANF;AAOTC,MAAAA,SAAS,EAAC;AAPD,KAAb;AASH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChB;AACA,QAAIC,OAAO,GAAGf,MAAM,CAACgB,IAAP,CAAY,SAAZ,CAAd;;AACA,QAAID,OAAJ,EAAa;AACT,WAAKE,QAAL,CAAc;AACVP,QAAAA,UAAU,EAAEK,OADF;AAEVJ,QAAAA,WAAW,EAAE;AAFH,OAAd;AAIH,KARe,CAShB;;;AACA,QAAIO,YAAJ;AACA/B,IAAAA,KAAK,CAACgC,GAAN,CAAW,6CAAX,EACKC,IADL,CACUC,QAAQ,IAAI;AACdH,MAAAA,YAAY,GAAGG,QAAQ,CAACC,IAAxB;AACAJ,MAAAA,YAAY,CAACK,OAAb,CAAqBC,IAAI,IAAI;AACzB,aAAKP,QAAL,CAAc;AACVN,UAAAA,WAAW,EAAE,KAAKL,KAAL,CAAWK,WAAX,CAAuBc,MAAvB,CAA8B;AACvC,oBAAQD,IAAI,CAACE,WAD0B;AAEvC,mBAAO;AAFgC,WAA9B;AADH,SAAd;AAMH,OAPD;AAQH,KAXL,EAYKC,KAZL,CAYYC,CAAD,IAAO;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACH,KAdL;AAgBH;;AAGDG,EAAAA,YAAY,GAAG;AACX,UAAMC,SAAS,GAAG,KAAK1B,KAAL,CAAWE,SAA7B;;AACA,QAAIwB,SAAS,IAAI,EAAjB,EAAqB;AACjB3C,MAAAA,OAAO,CAAC4C,KAAR,CAAc,6BAAd;AACH,KAFD,MAGK;AACD9C,MAAAA,KAAK,CAACgC,GAAN,CAAW,uDAAsDa,SAAU,EAA3E,EACKZ,IADL,CACUC,QAAQ,IAAI;AACd,YAAIa,YAAY,GAAGb,QAAQ,CAACC,IAAT,CAAca,KAAd,CAAoB,CAApB,EAAuBC,OAA1C;AACA/C,QAAAA,OAAO,CAACgD,OAAR,CAAgB,aAAhB;AACA,aAAKpB,QAAL,CAAc;AACVV,UAAAA,SAAS,EAAE2B;AADD,SAAd;AAIH,OARL,EASKP,KATL,CASYC,CAAD,IAAO;AACVvC,QAAAA,OAAO,CAAC4C,KAAR,CAAc,uCAAd;AACAJ,QAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACH,OAZL;AAaH;AACJ;;AAEDU,EAAAA,iBAAiB,CAACV,CAAD,EAAI;AACjB,SAAKX,QAAL,CAAc;AACVT,MAAAA,SAAS,EAAEoB,CAAC,CAACW,MAAF,CAASC;AADV,KAAd;AAGH;;AAEDC,EAAAA,aAAa,CAACb,CAAD,EAAI;AACb,SAAKX,QAAL,CAAc;AACVV,MAAAA,SAAS,EAAEqB,CAAC,CAACW,MAAF,CAASC;AADV,KAAd;AAGH;;AAEDE,EAAAA,aAAa,CAACd,CAAD,EAAI;AACb,SAAKX,QAAL,CAAc;AACVR,MAAAA,KAAK,EAAEmB,CAAC,CAACW,MAAF,CAASC;AADN,KAAd;AAGH;;AAEAG,EAAAA,WAAW,CAACf,CAAD,EAAGgB,QAAH,EAAa;AACrB,QAAIjC,WAAW,GAAG,KAAKL,KAAL,CAAWK,WAA7B;AACAA,IAAAA,WAAW,CAACY,OAAZ,CAAoBC,IAAI,IAAI;AACxBK,MAAAA,OAAO,CAACC,GAAR,CAAYN,IAAI,CAACqB,IAAjB;;AACA,UAAGrB,IAAI,CAACqB,IAAL,IAAaD,QAAhB,EAAyB;AACvBpB,QAAAA,IAAI,CAACsB,GAAL,GAASlB,CAAT;AACD;AACJ,KALD;AAMA,SAAKX,QAAL,CAAc;AACVN,MAAAA,WAAW,EAACA;AADF,KAAd;AAGD;;AAEHoC,EAAAA,SAAS,GAAG;AACR,UAAMxC,SAAS,GAAG,KAAKD,KAAL,CAAWC,SAA7B;AACA,UAAMG,UAAU,GAAG,KAAKJ,KAAL,CAAWI,UAA9B;AACA,UAAMD,KAAK,GAAG,KAAKH,KAAL,CAAWG,KAAzB;AACA,QAAIuC,eAAJ,CAJQ,CAMR;AACA;;AACA,QAAIrC,WAAW,GAAG,KAAKL,KAAL,CAAWK,WAA7B;AACA,QAAIsC,cAAc,GAAG,EAArB;AACA,QAAIC,OAAO,GAAG,EAAd;AACAvC,IAAAA,WAAW,CAACY,OAAZ,CAAoBC,IAAI,IAAI;AACxB,UAAGA,IAAI,CAACsB,GAAL,GAAW,CAAd,EAAgB;AACZG,QAAAA,cAAc,GAAGA,cAAc,CAACxB,MAAf,CAAsB;AACnC,kBAAOD,IAAI,CAACqB,IADuB;AAEnC,iBAAMrB,IAAI,CAACsB;AAFwB,SAAtB,CAAjB;AAIH;AACJ,KAPD;;AASA,QAAGG,cAAc,CAACE,MAAf,IAAyB,CAA5B,EACA;AACI9D,MAAAA,OAAO,CAAC4C,KAAR,CAAc,8CAAd;AACH,KAHD,MAKA;AACIgB,MAAAA,cAAc,CAAC1B,OAAf,CAAuBC,IAAI,IAAI;AAC3B,gBAAOA,IAAI,CAACqB,IAAZ;AACI,eAAK,WAAL;AACIrB,YAAAA,IAAI,CAACqB,IAAL,GAAY,WAAZ;AACA;;AACJ,eAAK,QAAL;AACIrB,YAAAA,IAAI,CAACqB,IAAL,GAAY,QAAZ;AACA;;AACJ,eAAK,MAAL;AACIrB,YAAAA,IAAI,CAACqB,IAAL,GAAY,MAAZ;AACA;;AACJ,eAAK,SAAL;AACIrB,YAAAA,IAAI,CAACqB,IAAL,GAAY,SAAZ;AACA;;AACJ,eAAK,OAAL;AACIrB,YAAAA,IAAI,CAACqB,IAAL,GAAY,OAAZ;AACA;AAfR;AAiBH,OAlBD;AAmBAI,MAAAA,cAAc,CAAC1B,OAAf,CAAuB6B,YAAY,IAAE;AACjC,YAAIC,WAAW,GAAG,KAAlB;AACAH,QAAAA,OAAO,CAAC3B,OAAR,CAAgB+B,SAAS,IAAG;AACxB,cAAGF,YAAY,CAACP,IAAb,IAAqBS,SAAS,CAACT,IAAlC,EAAuC;AACnCS,YAAAA,SAAS,CAACR,GAAV,IAAeM,YAAY,CAACN,GAA5B;AACAO,YAAAA,WAAW,GAAG,IAAd;AACH;AACJ,SALD;;AAMA,YAAGA,WAAW,IAAI,KAAlB,EAAwB;AACpBH,UAAAA,OAAO,GAAGA,OAAO,CAACzB,MAAR,CAAe2B,YAAf,CAAV;AACH;AACJ,OAXD;AAYH;;AAED,QAAG7C,SAAS,IAAI,EAAhB,EACA;AACIlB,MAAAA,OAAO,CAAC4C,KAAR,CAAc,wCAAd;AACH,KAHD,MAKA;AACI,UAAIX,IAAI,GAAG;AACP,qBAAaf,SADN;AAEP,qBAAaG,UAFN;AAGP,iBAASD,KAHF;AAIP,kBAAUyC;AAJH,OAAX;AAOA/D,MAAAA,KAAK,CAACoE,IAAN,CAAW,6DAAX,EAA0EjC,IAA1E,EACKF,IADL,CACUC,QAAQ,IAAI;AACd2B,QAAAA,eAAe,GAAG3B,QAAQ,CAACC,IAAT,CAAcjC,OAAhC;AACAA,QAAAA,OAAO,CAACgD,OAAR,CAAgBW,eAAhB;AAEH,OALL,EAMKrB,KANL,CAMYC,CAAD,IAAO;AACVC,QAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACH,OARL;AASH;AAGJ;;AAGD4B,EAAAA,MAAM,GAAG;AACL,QAAIC,IAAI,GAAG,IAAX;AACA,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADJ,eAEI,oBAAC,MAAD;AACI,MAAA,WAAW,EAAC,QADhB;AAEI,MAAA,QAAQ,EAAE,KAAKnB,iBAAL,CAAuBoB,IAAvB,CAA4B,IAA5B,CAFd;AAGI,MAAA,QAAQ,EAAE,KAAK3B,YAAL,CAAkB2B,IAAlB,CAAuB,IAAvB,CAHd;AAII,MAAA,KAAK,EAAE;AAAEC,QAAAA,KAAK,EAAE;AAAT,OAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,eASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATJ,eAUI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAVJ,eAWI;AAAK,MAAA,QAAQ,EAAE,KAAKlB,aAAL,CAAmBiB,IAAnB,CAAwB,IAAxB,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,KAAK,EAAE,KAAKpD,KAAL,CAAWC,SAAtC;AAAiD,MAAA,IAAI,EAAC,QAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,yBAC2E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAD3E,eAEI;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,KAAK,EAAE,KAAKD,KAAL,CAAWI,UAAtC;AAAkD,MAAA,IAAI,EAAC,QAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,WAXJ,eAeI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAfJ,eAiBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAjBJ,eAkBI;AAAK,MAAA,QAAQ,EAAE,KAAKgC,aAAL,CAAmBgB,IAAnB,CAAwB,IAAxB,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,KAAK,EAAC,GAA1B;AAA8B,MAAA,IAAI,EAAC,OAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,wBACsD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADtD,eAEI;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,KAAK,EAAC,GAA1B;AAA8B,MAAA,IAAI,EAAC,OAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,QAlBJ,eAsBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtBA,eAuBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAvBJ,eAwBI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKpD,KAAL,CAAWK,WAAX,CAAuBiD,GAAvB,CAA2B,UAAUpC,IAAV,EAAgB;AACxC,UAAIqC,QAAQ,GAAGrC,IAAI,CAACqB,IAApB;;AACA,cAAQgB,QAAR;AACI,aAAK,WAAL;AACA,aAAK,WAAL;AACI,8BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAM,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAN,OAA0BA,QAA1B,CADJ,eAEK,oBAAC,WAAD;AAAc,YAAA,YAAY,EAAE,CAA5B;AAAgC,YAAA,QAAQ,EAAGjC,CAAD,IAAK6B,IAAI,CAACd,WAAL,CAAiBf,CAAjB,EAAmBiC,QAAnB,CAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFL,CADJ;;AAOJ,aAAK,QAAL;AACA,aAAK,QAAL;AACI,8BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAM,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAN,OAAoBA,QAApB,CADJ,eAEI,oBAAC,WAAD;AAAa,YAAA,YAAY,EAAE,CAA3B;AAA+B,YAAA,QAAQ,EAAGjC,CAAD,IAAK6B,IAAI,CAACd,WAAL,CAAiBf,CAAjB,EAAmBiC,QAAnB,CAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,CADJ;;AAMJ,aAAK,SAAL;AACA,aAAK,SAAL;AACI,8BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAM,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAN,OAAqBA,QAArB,CADJ,eAEI,oBAAC,WAAD;AAAa,YAAA,YAAY,EAAE,CAA3B;AAA+B,YAAA,QAAQ,EAAGjC,CAAD,IAAK6B,IAAI,CAACd,WAAL,CAAiBf,CAAjB,EAAmBiC,QAAnB,CAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,CADJ;;AAMJ,aAAK,MAAL;AACA,aAAK,MAAL;AACI,8BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAM,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAN,OAAkBA,QAAlB,CADJ,eAEI,oBAAC,WAAD;AAAa,YAAA,YAAY,EAAE,CAA3B;AAA8B,YAAA,QAAQ,EAAGjC,CAAD,IAAK6B,IAAI,CAACd,WAAL,CAAiBf,CAAjB,EAAmBiC,QAAnB,CAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,CADJ;;AAMJ,aAAK,OAAL;AACA,aAAK,OAAL;AACI,8BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAM,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAN,OAAwBA,QAAxB,CADJ,eAEI,oBAAC,WAAD;AAAa,YAAA,YAAY,EAAE,CAA3B;AAA+B,YAAA,QAAQ,EAAGjC,CAAD,IAAK6B,IAAI,CAACd,WAAL,CAAiBf,CAAjB,EAAmBiC,QAAnB,CAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,CADJ;AApCR;AA2CH,KA7CA,CADL,CADJ,CADJ,CAxBJ,eA8EI,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,SAAb;AAAuB,MAAA,OAAO,EAAE,KAAKd,SAAL,CAAeW,IAAf,CAAoB,IAApB,CAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBA9EJ,CADJ;AAwFH;;AAnRmC;;AAuRxC,eAAexD,SAAf","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { Button, message, Input,InputNumber } from 'antd';\nimport { FaCoffee } from 'react-icons/fa';\nimport { GiChocolateBar, GiCupcake } from 'react-icons/gi';\nimport { FaLeaf, FaPizzaSlice } from 'react-icons/fa';\nimport { UserOutlined, PlusOutlined } from '@ant-design/icons';\nimport { Link } from 'react-router-dom';\nimport cookie from 'react-cookies';\n\nconst { Search } = Input;\n\nclass AddFriend extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            user_owes: '',\n            searchKey: '',\n            proof: '',\n            user_owned: '',\n            rewardsEnum: [],\n            rewardname:'',\n            rewardqty:1\n        };\n    }\n\n    componentDidMount() {\n        //get login status from cookie\n        let loginID = cookie.load(\"user_id\");\n        if (loginID) {\n            this.setState({\n                user_owned: loginID,\n                rewardsEnum: []\n            })\n        }\n        // pull rewardsEnum\n        let responseData;\n        axios.get(`https://aip-v1.ts.r.appspot.com/api/rewards`)\n            .then(response => {\n                responseData = response.data;\n                responseData.forEach(item => {\n                    this.setState({\n                        rewardsEnum: this.state.rewardsEnum.concat({\n                            \"name\": item.reward_name,\n                            \"qty\": 0\n                        })\n                    })\n                });\n            })\n            .catch((e) => {\n                console.log(e)\n            })\n\n    }\n\n\n    handleSearch() {\n        const searchkey = this.state.searchKey;\n        if (searchkey == \"\") {\n            message.error(\"Blank User cant be searched\");\n        }\n        else {\n            axios.get(`https://aip-v1.ts.r.appspot.com/api/users/?username=${searchkey}`)\n                .then(response => {\n                    let searcheduser = response.data.users[0].user_id;\n                    message.success(\"User Found!\");\n                    this.setState({\n                        user_owes: searcheduser\n\n                    })\n                })\n                .catch((e) => {\n                    message.error(\"User Doesn't Exist! Please Try again!\");\n                    console.log(e)\n                })\n        }\n    }\n\n    onSearchKeyChange(e) {\n        this.setState({\n            searchKey: e.target.value\n        })\n    }\n\n    onChangeRadio(e) {\n        this.setState({\n            user_owes: e.target.value\n        })\n    }\n\n    onChangeProof(e) {\n        this.setState({\n            proof: e.target.value\n        })\n    }\n\n     onChangeQty(e,Itemname) {   \n        let rewardsEnum = this.state.rewardsEnum;\n        rewardsEnum.forEach(item => {\n            console.log(item.name);\n            if(item.name == Itemname){\n              item.qty=e;\n            }\n        });\n        this.setState({\n            rewardsEnum:rewardsEnum\n        });\n      }\n\n    addFavour() {\n        const user_owes = this.state.user_owes;\n        const user_owned = this.state.user_owned;\n        const proof = this.state.proof;\n        let responseMessage;\n\n        // API parameters\n        // save rewards whose count is more than 0\n        let rewardsEnum = this.state.rewardsEnum;\n        let newRewardsEnum = [];\n        let rewards = [];\n        rewardsEnum.forEach(item => {\n            if(item.qty > 0){\n                newRewardsEnum = newRewardsEnum.concat({\n                    \"name\":item.name,\n                    \"qty\":item.qty\n                })\n            }\n        });\n\n        if(newRewardsEnum.length == 0)\n        {\n            message.error(\"You have to choose at least one favour first\");\n        }\n        else\n        {\n            newRewardsEnum.forEach(item => {\n                switch(item.name){\n                    case \"chocolate\":\n                        item.name = \"Chocolate\";\n                        break;\n                    case \"coffee\":\n                        item.name = \"Coffee\"\n                        break;\n                    case \"mint\":\n                        item.name = \"Mint\"\n                        break;\n                    case \"cupcake\":\n                        item.name = \"Cupcake\"\n                        break;\n                    case \"pizza\":\n                        item.name = \"Pizza\"   \n                        break;         \n                }\n            });\n            newRewardsEnum.forEach(currentfavor=>{\n                let ItemChanged = false;\n                rewards.forEach(oldFavour =>{\n                    if(currentfavor.name == oldFavour.name){\n                        oldFavour.qty+=currentfavor.qty\n                        ItemChanged = true;\n                    }\n                });\n                if(ItemChanged == false){\n                    rewards = rewards.concat(currentfavor);\n                }\n            });\n        }\n\n        if(user_owes == \"\")\n        {\n            message.error(\"Please search the user before adding.!\")\n        }\n        else\n        {\n            let data = {\n                \"user_owes\": user_owes,\n                \"user_owed\": user_owned,\n                \"proof\": proof,\n                \"reward\": rewards\n            }\n            \n            axios.post('https://aip-v1.ts.r.appspot.com/api/favours/add_transaction', data)\n                .then(response => {\n                    responseMessage = response.data.message;\n                    message.success(responseMessage);\n                   \n                })\n                .catch((e) => {\n                    console.log(e)\n                })\n        }\n       \n\n    }\n\n\n    render() {\n        let self = this;\n        return (\n            <div>\n                <p>Search the Username</p>\n                <Search\n                    placeholder=\"Search\"\n                    onChange={this.onSearchKeyChange.bind(this)}\n                    onSearch={this.handleSearch.bind(this)}\n                    style={{ width: \"30vh\" }}\n                />\n\n                <hr />\n                <p>Choose Favour?</p>\n                <div onChange={this.onChangeRadio.bind(this)}>\n                    <input type=\"radio\" value={this.state.user_owes} name=\"Favour\" /> Owes <br />\n                    <input type=\"radio\" value={this.state.user_owned} name=\"Favour\" /> Owned\n                </div>\n                <hr />\n\n                <p>Select if proof is need or not?</p>\n                <div onChange={this.onChangeProof.bind(this)}>\n                    <input type=\"radio\" value=\"1\" name=\"Proof\" /> Yes <br />\n                    <input type=\"radio\" value=\"0\" name=\"Proof\" /> No\n            </div>\n            <hr/>\n                <p>Select the Favour OWed or Owned</p>\n                <div className=\"addRewards\">\n                    <div className=\"addRewards-rewardsOption\">\n                        <ul>\n                            {this.state.rewardsEnum.map(function (item) {\n                                let itemName = item.name;\n                                switch (itemName) {\n                                    case \"Chocolate\":\n                                    case \"chocolate\":\n                                        return (\n                                            <li>\n                                                <span><GiChocolateBar /> {itemName}</span>\n                                                 <InputNumber  defaultValue={0}  onChange={(e)=>self.onChangeQty(e,itemName)}/>\n                                           \n                                            </li>\n                                        )\n                                    case \"Coffee\":\n                                    case \"coffee\":\n                                        return (\n                                            <li>\n                                                <span><FaCoffee /> {itemName}</span>\n                                                <InputNumber defaultValue={0}  onChange={(e)=>self.onChangeQty(e,itemName)}/>\n                                            </li>\n                                        )\n                                    case \"Cupcake\":\n                                    case \"cupcake\":\n                                        return (\n                                            <li>\n                                                <span><GiCupcake /> {itemName}</span>\n                                                <InputNumber defaultValue={0}  onChange={(e)=>self.onChangeQty(e,itemName)}/>\n                                            </li>\n                                        )\n                                    case \"Mint\":\n                                    case \"mint\":\n                                        return (\n                                            <li>\n                                                <span><FaLeaf /> {itemName}</span>\n                                                <InputNumber defaultValue={0} onChange={(e)=>self.onChangeQty(e,itemName)}/>\n                                            </li>\n                                        )\n                                    case \"Pizza\":\n                                    case \"pizza\":\n                                        return (\n                                            <li>\n                                                <span><FaPizzaSlice /> {itemName}</span>\n                                                <InputNumber defaultValue={0}  onChange={(e)=>self.onChangeQty(e,itemName)}/>\n                                            </li>\n                                        )\n                                }\n                            })}\n                        </ul>\n                    </div>\n                </div>\n                \n\n                <Button type=\"primary\" onClick={this.addFavour.bind(this)}>Add Favour</Button>\n\n            </div>\n\n\n\n\n\n        )\n    }\n\n}\n\nexport default AddFriend;"]},"metadata":{},"sourceType":"module"}