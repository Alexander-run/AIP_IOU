{"ast":null,"code":"var _jsxFileName = \"/Users/vrajmehta/Downloads/Downloads/React:JavaScript/AIP_IOU/client/src/components/AddRequest/Index.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport \"./index.css\";\nimport { ImCross } from 'react-icons/im';\nimport { Button, message } from 'antd';\nimport { GiChocolateBar, GiCupcake } from 'react-icons/gi';\nimport { FaCoffee, FaLeaf, FaPizzaSlice } from 'react-icons/fa';\nimport axios from 'axios';\nimport cookie from 'react-cookies';\n\nclass AddRequest extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      title: '',\n      description: '',\n      rewardsEnum: []\n    };\n  }\n\n  componentDidMount() {\n    // clear rewardsEnum\n    this.setState({\n      rewardsEnum: []\n    }); // pull rewardsEnum\n\n    let responseData;\n    axios.get(`https://aip-v1.ts.r.appspot.com/api/rewards`).then(response => {\n      responseData = response.data;\n      responseData.forEach(item => {\n        this.setState({\n          rewardsEnum: this.state.rewardsEnum.concat({\n            \"name\": item.reward_name,\n            \"qty\": 0\n          })\n        });\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  changeTitle(e) {\n    this.setState({\n      title: e.target.value\n    });\n  }\n\n  changeDescription(e) {\n    this.setState({\n      description: e.target.value\n    });\n  }\n\n  onChangeRewards(ev, action, rewardType) {\n    let newCount = 0;\n    let rewardsEnum = this.state.rewardsEnum;\n    rewardsEnum.forEach(item => {\n      if (item.name == rewardType) {\n        if (action == 'add') {\n          item.qty += 1;\n        } else {\n          if (item.qty > 0) {\n            item.qty -= 1;\n          }\n        }\n      }\n    });\n    this.setState({\n      rewardsEnum: rewardsEnum\n    });\n  }\n\n  handlePost() {\n    let resMessage; // API parameters\n    // save rewards whose count is more than 0\n\n    let rewardsEnum = this.state.rewardsEnum;\n    let newRewardsEnum = [];\n    rewardsEnum.forEach(item => {\n      if (item.qty > 0) {\n        newRewardsEnum = newRewardsEnum.concat({\n          \"name\": item.name,\n          \"qty\": item.qty\n        });\n      }\n    });\n    newRewardsEnum.forEach(item => {\n      switch (item.name) {\n        case \"chocolate\":\n          item.name = \"Chocolate\";\n          break;\n\n        case \"coffee\":\n          item.name = \"Coffee\";\n          break;\n\n        case \"mint\":\n          item.name = \"Mint\";\n          break;\n\n        case \"cupcake\":\n          item.name = \"Cupcake\";\n          break;\n\n        case \"pizza\":\n          item.name = \"Pizza\";\n          break;\n      }\n    }); // HTTP post request to API (create a new post)\n\n    let userID = cookie.load(\"user_id\");\n    let data = {\n      \"post\": {\n        // get logged in userID from cookie \n        \"added_by\": userID,\n        \"title\": `${this.state.title}`,\n        \"description\": `${this.state.description}`\n      },\n      \"reward\": newRewardsEnum\n    };\n\n    if (data.post.title == \"\") {\n      message.error(\"Title can not be null\");\n    } else if (data.post.description == \"\") {\n      message.error(\"description can not be null\");\n    } else if (data.reward.length == 0) {\n      message.error(\"you have to add at least one reward\");\n    } else {\n      // HTTP request\n      axios.post('https://aip-v1.ts.r.appspot.com/api/posts', data).then(response => {\n        resMessage = response.data.message;\n        message.success(resMessage);\n        setTimeout(() => {\n          window.location.reload();\n        }, 2000);\n      }).catch(e => {\n        console.log(e);\n      });\n    }\n  }\n\n  render() {\n    const self = this;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addRequest\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addRequest-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 21\n      }\n    }, \"Please enter the title of your request:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      autoFocus: \"autofocus\",\n      value: this.state.title,\n      onChange: this.changeTitle.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addRequest-description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 21\n      }\n    }, \"Please describe your request:\"), /*#__PURE__*/React.createElement(\"textarea\", {\n      value: this.state.description,\n      onChange: this.changeDescription.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"addRequest-rewardsOption\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }\n    }, \"Please click the icon to add the corresponding rewards\", /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 21\n      }\n    }, this.state.rewardsEnum.map(function (item) {\n      let itemName = item.name;\n      let qty;\n\n      switch (itemName) {\n        case \"Chocolate\":\n        case \"chocolate\":\n          qty = item.qty;\n          return /*#__PURE__*/React.createElement(\"li\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 41\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(GiChocolateBar, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 51\n            }\n          }), \" chocolate\"), /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"addRequest-rewardsOption-countButton\",\n            onClick: ev => {\n              self.onChangeRewards(ev, \"minus\", \"chocolate\");\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 49\n            }\n          }, \"-\"), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"addRequest-rewardsOption-count\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 49\n            }\n          }, qty), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"addRequest-rewardsOption-countButton\",\n            onClick: ev => {\n              self.onChangeRewards(ev, \"add\", \"chocolate\");\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 49\n            }\n          }, \"+\")));\n\n        case \"Coffee\":\n        case \"coffee\":\n          qty = item.qty;\n          return /*#__PURE__*/React.createElement(\"li\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 41\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(FaCoffee, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 51\n            }\n          }), \" coffee\"), /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"addRequest-rewardsOption-countButton\",\n            onClick: ev => {\n              self.onChangeRewards(ev, \"minus\", \"coffee\");\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 49\n            }\n          }, \"-\"), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"addRequest-rewardsOption-count\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 49\n            }\n          }, qty), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"addRequest-rewardsOption-countButton\",\n            onClick: ev => {\n              self.onChangeRewards(ev, \"add\", \"coffee\");\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 49\n            }\n          }, \"+\")));\n\n        case \"Cupcake\":\n        case \"cupcake\":\n          qty = item.qty;\n          return /*#__PURE__*/React.createElement(\"li\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 41\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(GiCupcake, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 51\n            }\n          }), \" cupcake\"), /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"addRequest-rewardsOption-countButton\",\n            onClick: ev => {\n              self.onChangeRewards(ev, \"minus\", \"cupcake\");\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 49\n            }\n          }, \"-\"), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"addRequest-rewardsOption-count\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 49\n            }\n          }, qty), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"addRequest-rewardsOption-countButton\",\n            onClick: ev => {\n              self.onChangeRewards(ev, \"add\", \"cupcake\");\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 49\n            }\n          }, \"+\")));\n\n        case \"Mint\":\n        case \"mint\":\n          qty = item.qty;\n          return /*#__PURE__*/React.createElement(\"li\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 41\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(FaLeaf, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 51\n            }\n          }), \" mint\"), /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"addRequest-rewardsOption-countButton\",\n            onClick: ev => {\n              self.onChangeRewards(ev, \"minus\", \"mint\");\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 49\n            }\n          }, \"-\"), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"addRequest-rewardsOption-count\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 49\n            }\n          }, qty), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"addRequest-rewardsOption-countButton\",\n            onClick: ev => {\n              self.onChangeRewards(ev, \"add\", \"mint\");\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 49\n            }\n          }, \"+\")));\n\n        case \"Pizza\":\n        case \"pizza\":\n          qty = item.qty;\n          return /*#__PURE__*/React.createElement(\"li\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 41\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(FaPizzaSlice, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 51\n            }\n          }), \" pizza\"), /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"addRequest-rewardsOption-countButton\",\n            onClick: ev => {\n              self.onChangeRewards(ev, \"minus\", \"pizza\");\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 49\n            }\n          }, \"-\"), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"addRequest-rewardsOption-count\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 49\n            }\n          }, qty), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"addRequest-rewardsOption-countButton\",\n            onClick: ev => {\n              self.onChangeRewards(ev, \"add\", \"pizza\");\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 49\n            }\n          }, \"+\")));\n      }\n    }))), /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      onClick: this.handlePost.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 17\n      }\n    }, \"Post\"));\n  }\n\n}\n\nexport default AddRequest;","map":{"version":3,"sources":["/Users/vrajmehta/Downloads/Downloads/React:JavaScript/AIP_IOU/client/src/components/AddRequest/Index.js"],"names":["React","Link","ImCross","Button","message","GiChocolateBar","GiCupcake","FaCoffee","FaLeaf","FaPizzaSlice","axios","cookie","AddRequest","Component","constructor","props","state","title","description","rewardsEnum","componentDidMount","setState","responseData","get","then","response","data","forEach","item","concat","reward_name","catch","e","console","log","changeTitle","target","value","changeDescription","onChangeRewards","ev","action","rewardType","newCount","name","qty","handlePost","resMessage","newRewardsEnum","userID","load","post","error","reward","length","success","setTimeout","window","location","reload","render","self","bind","map","itemName"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport \"./index.css\";\nimport { ImCross } from 'react-icons/im';\nimport { Button, message } from 'antd';\nimport { GiChocolateBar, GiCupcake } from 'react-icons/gi';\nimport { FaCoffee, FaLeaf, FaPizzaSlice } from 'react-icons/fa';\nimport axios from 'axios';\nimport cookie from 'react-cookies';\n\n\nclass AddRequest extends React.Component{\n    \n    constructor(props){\n        super(props);\n        this.state={\n            title:'',\n            description:'',\n            rewardsEnum:[]\n        };\n    }\n\n    componentDidMount(){\n        // clear rewardsEnum\n        this.setState({\n            rewardsEnum:[]\n        });\n\n        // pull rewardsEnum\n        let responseData;\n        axios.get(`https://aip-v1.ts.r.appspot.com/api/rewards`)\n        .then(response =>{\n            responseData = response.data;\n            responseData.forEach(item => {\n                this.setState({\n                    rewardsEnum:this.state.rewardsEnum.concat({\n                        \"name\":item.reward_name,\n                        \"qty\":0\n                    })\n                })\n            });\n        })\n        .catch((e) => {\n            console.log(e)\n        })\n    }\n\n    changeTitle(e){\n        this.setState({\n            title:e.target.value,\n        });\n    }\n    changeDescription(e){\n        this.setState({\n            description:e.target.value,\n        })\n    }\n\n    onChangeRewards(ev,action,rewardType){\n        let newCount = 0;\n        let rewardsEnum = this.state.rewardsEnum;\n        rewardsEnum.forEach(item => {\n            if(item.name == rewardType){\n                if(action =='add'){\n                    item.qty += 1;\n                }\n                else{\n                    if(item.qty > 0){\n                        item.qty -= 1;\n                    }                    \n                }\n            }\n        });\n        this.setState({\n            rewardsEnum:rewardsEnum\n        });   \n    }\n\n    handlePost(){\n        let resMessage;\n        // API parameters\n        // save rewards whose count is more than 0\n        let rewardsEnum = this.state.rewardsEnum;\n        let newRewardsEnum = [];\n        rewardsEnum.forEach(item => {\n            if(item.qty > 0){\n                newRewardsEnum = newRewardsEnum.concat({\n                    \"name\":item.name,\n                    \"qty\":item.qty\n                })\n            }\n        });\n        newRewardsEnum.forEach(item => {\n            switch(item.name){\n                case \"chocolate\":\n                    item.name = \"Chocolate\";\n                    break;\n                case \"coffee\":\n                    item.name = \"Coffee\"\n                    break;\n                case \"mint\":\n                    item.name = \"Mint\"\n                    break;\n                case \"cupcake\":\n                    item.name = \"Cupcake\"\n                    break;\n                case \"pizza\":\n                    item.name = \"Pizza\"   \n                    break;         \n            }\n        });\n        // HTTP post request to API (create a new post)\n        let userID = cookie.load(\"user_id\");\n        let data = {\n            \"post\" : {\n                // get logged in userID from cookie \n                \"added_by\": userID,\n                \"title\": `${this.state.title}`,\n                \"description\": `${this.state.description}`\n            },\n            \"reward\" : newRewardsEnum\n        };\n        if(data.post.title == \"\"){\n            message.error(\"Title can not be null\");\n        }else if(data.post.description == \"\"){\n            message.error(\"description can not be null\");\n        }else if(data.reward.length == 0){\n            message.error(\"you have to add at least one reward\");\n        }else{\n            // HTTP request\n            axios.post('https://aip-v1.ts.r.appspot.com/api/posts',data)\n            .then(response => {\n                resMessage = response.data.message;\n                message.success(resMessage);\n                setTimeout(() => {\n                    window.location.reload();\n                },2000);\n            })\n            .catch((e) => {\n                console.log(e)\n            })\n        }\n        \n    }\n\n    render(){\n        const self = this;\n        return(\n            <div className=\"addRequest\">\n                <div className=\"addRequest-title\">\n                    <p>Please enter the title of your request:</p>\n                    <input \n                        type='text'                         \n                        autoFocus='autofocus'\n                        value={this.state.title}\n                        onChange={this.changeTitle.bind(this)}/>\n                </div>\n                <div className=\"addRequest-description\">\n                    <p>Please describe your request:</p>\n                    <textarea                        \n                        value={this.state.description}\n                        onChange={this.changeDescription.bind(this)}/>\n                </div>\n                <div className=\"addRequest-rewardsOption\">\n                    Please click the icon to add the corresponding rewards \n                    <ul>\n                        {this.state.rewardsEnum.map(function(item){\n                            let itemName = item.name;\n                            let qty;\n                            switch(itemName){\n                                case \"Chocolate\":\n                                case \"chocolate\":\n                                    qty = item.qty;\n                                    return(\n                                        <li>\n                                            <span><GiChocolateBar /> chocolate</span>\n                                            <span>\n                                                <span \n                                                    className=\"addRequest-rewardsOption-countButton\"\n                                                    onClick={(ev)=>{self.onChangeRewards(ev,\"minus\",\"chocolate\")}}\n                                                >-</span>\n                                                <span className=\"addRequest-rewardsOption-count\">{qty}</span>\n                                                <span \n                                                    className=\"addRequest-rewardsOption-countButton\"\n                                                    onClick={(ev)=>{self.onChangeRewards(ev,\"add\",\"chocolate\")}}\n                                                >+</span>\n                                            </span>\n                                        </li>\n                                    )\n                                case \"Coffee\":\n                                case \"coffee\":\n                                    qty = item.qty;\n                                    return(\n                                        <li>\n                                            <span><FaCoffee /> coffee</span>\n                                            <span>\n                                                <span \n                                                    className=\"addRequest-rewardsOption-countButton\"\n                                                    onClick={(ev)=>{self.onChangeRewards(ev,\"minus\",\"coffee\")}}\n                                                >-</span>\n                                                <span className=\"addRequest-rewardsOption-count\">{qty}</span>\n                                                <span \n                                                    className=\"addRequest-rewardsOption-countButton\"\n                                                    onClick={(ev)=>{self.onChangeRewards(ev,\"add\",\"coffee\")}}\n                                                >+</span>\n                                            </span>\n                                        </li>\n                                    )\n                                case \"Cupcake\":\n                                case \"cupcake\":\n                                    qty = item.qty;\n                                    return(\n                                        <li>\n                                            <span><GiCupcake /> cupcake</span>\n                                            <span>\n                                                <span \n                                                    className=\"addRequest-rewardsOption-countButton\"\n                                                    onClick={(ev)=>{self.onChangeRewards(ev,\"minus\",\"cupcake\")}}\n                                                >-</span>\n                                                <span className=\"addRequest-rewardsOption-count\">{qty}</span>\n                                                <span \n                                                    className=\"addRequest-rewardsOption-countButton\"\n                                                    onClick={(ev)=>{self.onChangeRewards(ev,\"add\",\"cupcake\")}}\n                                                >+</span>\n                                            </span>\n                                        </li>\n                                    )\n                                case \"Mint\":\n                                case \"mint\":\n                                    qty = item.qty;\n                                    return(\n                                        <li>\n                                            <span><FaLeaf /> mint</span>\n                                            <span>\n                                                <span \n                                                    className=\"addRequest-rewardsOption-countButton\"\n                                                    onClick={(ev)=>{self.onChangeRewards(ev,\"minus\",\"mint\")}}\n                                                >-</span>\n                                                <span className=\"addRequest-rewardsOption-count\">{qty}</span>\n                                                <span \n                                                    className=\"addRequest-rewardsOption-countButton\"\n                                                    onClick={(ev)=>{self.onChangeRewards(ev,\"add\",\"mint\")}}\n                                                >+</span>\n                                            </span>\n                                        </li>\n                                    )\n                                case \"Pizza\":\n                                case \"pizza\":\n                                    qty = item.qty;\n                                    return(\n                                        <li>\n                                            <span><FaPizzaSlice /> pizza</span>\n                                            <span>\n                                                <span \n                                                    className=\"addRequest-rewardsOption-countButton\"\n                                                    onClick={(ev)=>{self.onChangeRewards(ev,\"minus\",\"pizza\")}}\n                                                >-</span>\n                                                <span className=\"addRequest-rewardsOption-count\">{qty}</span>\n                                                <span \n                                                    className=\"addRequest-rewardsOption-countButton\"\n                                                    onClick={(ev)=>{self.onChangeRewards(ev,\"add\",\"pizza\")}}\n                                                >+</span>\n                                            </span>\n                                        </li>\n                                    )\n                            }                            \n                        })}                        \n                    </ul>       \n                </div>\n                <Button type=\"primary\" onClick={this.handlePost.bind(this)}>Post</Button>\n            </div>\n        );\n    }\n\n}\n\nexport default AddRequest;"]},"metadata":{},"sourceType":"module"}