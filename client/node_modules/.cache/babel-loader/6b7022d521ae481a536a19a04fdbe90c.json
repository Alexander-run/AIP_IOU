{"ast":null,"code":"var _jsxFileName = \"/Users/vrajmehta/Downloads/Downloads/React:JavaScript/AIP_IOU/client/src/components/requestList/RequestList.js\";\nimport React from 'react';\nimport { Popover, Button, Modal, Input, message } from 'antd';\nimport { FaCoffee } from 'react-icons/fa';\nimport { GiChocolateBar, GiCupcake } from 'react-icons/gi';\nimport { FaLeaf, FaPizzaSlice } from 'react-icons/fa';\nimport './RequestList.css';\nimport { UserOutlined, UsergroupAddOutlined, CalendarOutlined } from '@ant-design/icons';\nimport AddRewards from \"../AddRewards/Index\";\nimport axios from 'axios';\nimport cookie from 'react-cookies';\nimport CompletePost from '../CompletePost/CompletePost';\nconst {\n  Search\n} = Input;\nlet timer = undefined;\n\nclass RequestList extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.timerStart = () => {\n      timer = setInterval(() => {\n        let responseData = [];\n        axios.get('https://aip-v1.ts.r.appspot.com/api/posts').then(response => {\n          // receive response Data\n          responseData = response.data.post; // Parse Data into local states\n\n          this.setState({\n            allPosts: responseData\n          });\n        }).catch(e => {\n          console.log(e);\n        });\n      }, 2000);\n    };\n\n    this.state = {\n      login: false,\n      displayButton: false,\n      allPosts: [],\n      particularPost_Post: [{\n        \"post_id\": \"\",\n        \"added_by\": \"\",\n        \"offer_by\": \"\",\n        \"title\": \"\",\n        \"description\": \"\",\n        \"added_datetime\": \"\",\n        \"status\": \"\",\n        \"proof\": false\n      }],\n      particularPost_Rewards: [],\n      searchKey: '',\n      particularPost_Poster: \"\",\n      particularPost_Signer: \"\",\n      particularPost_adders: [],\n      RewardsEnumnation: [],\n      addRewardsVisible: false,\n      uploadVisible: false,\n      displayAddRewardButton: \"none\",\n      displaySignPost: \"none\",\n      displayUploadProof: \"none\"\n    };\n  } // Timer for refresh the post list\n\n\n  componentDidMount() {\n    // get all posts \n    let responseData = [];\n    axios.get('https://aip-v1.ts.r.appspot.com/api/posts').then(response => {\n      // receive response Data\n      responseData = response.data.post; // Parse Data into local states\n\n      this.setState({\n        allPosts: responseData\n      });\n      console.log(\"ping\");\n    }).catch(e => {\n      console.log(e);\n    });\n    this.timerStart(); // get login status from cookie\n\n    let userID = cookie.load(\"user_id\");\n\n    if (userID) {\n      this.setState({\n        displayButton: \"block\"\n      });\n    } else {\n      this.setState({\n        displayButton: \"none\"\n      });\n    } // get the reward enumation\n\n\n    let rewards = [];\n    axios.get('https://aip-v1.ts.r.appspot.com/api/rewards').then(response => {\n      rewards = response.data;\n    }).catch(e => {\n      console.log(e);\n    });\n    this.setState({\n      RewardsEnumnation: rewards\n    });\n  }\n\n  handleItemSelect(item) {\n    let particularPost_Post;\n    let particularPost_Rewards;\n    let selectedPostID = item.post_id; // retrieve the selected Post data      \n\n    axios.get(`https://aip-v1.ts.r.appspot.com/api/posts/${selectedPostID}`).then(response => {\n      particularPost_Post = response.data.post;\n      particularPost_Rewards = response.data.rewards; // parse data into local states\n\n      this.setState({\n        particularPost_Post: particularPost_Post,\n        particularPost_Rewards: particularPost_Rewards\n      }); // decide which button to show in the detail page\n\n      this.setState({\n        displayAddRewardButton: \"none\",\n        displaySignPost: \"none\",\n        displayUploadProof: \"none\"\n      });\n      let loggedUserID = cookie.load(\"user_id\");\n\n      if (this.state.particularPost_Post[0].offer_by == null) {\n        this.setState({\n          displaySignPost: \"block\",\n          displayAddRewardButton: \"block\"\n        });\n      } else if (this.state.particularPost_Post[0].offer_by == loggedUserID && this.state.particularPost_Post[0].status != \"Closed\") {\n        this.setState({\n          displayUploadProof: \"block\",\n          displayAddRewardButton: \"none\"\n        });\n      } else if (this.state.particularPost_Post[0].status == \"Closed\") {\n        this.setState({\n          displayAddRewardButton: \"none\",\n          displaySignPost: \"none\",\n          displayUploadProof: \"none\"\n        });\n      }\n    }).then(() => {\n      // find the post man\n      let posterName;\n      let posterID = this.state.particularPost_Post[0].added_by;\n      axios.get(`https://aip-v1.ts.r.appspot.com/api/users/${posterID}`).then(response => {\n        posterName = response.data.users[0].first_name + \" \" + response.data.users[0].last_name;\n        this.setState({\n          particularPost_Poster: posterName\n        });\n      }).catch(e => {\n        console.log(e);\n      });\n    }).then(() => {\n      // find people who add rewards\n      // clear old particularPost_adders\n      this.setState({\n        particularPost_adders: []\n      });\n      let rewards = this.state.particularPost_Rewards; // [{\n      //     user_id: \"\"\n      //     rewards:[\n      //         {\n      //             reward_name:\"\",qty:int\n      //         },\n      //         {\n      //             reward_name:\"\",qty:int\n      //         }\n      //     ]\n      // }]\n\n      rewards.forEach(item => {\n        let adderID = item.user_id;\n        let adderRewards = item.rewards;\n        axios.get(`https://aip-v1.ts.r.appspot.com/api/users/${adderID}`).then(response => {\n          let adderName = response.data.users[0].first_name + \" \" + response.data.users[0].last_name;\n          let particularPost_adders = this.state.particularPost_adders;\n          this.setState({\n            particularPost_adders: particularPost_adders.concat({\n              \"name\": adderName,\n              \"rewards\": adderRewards\n            })\n          });\n        }).catch(e => {\n          console.log(e);\n        });\n      });\n    }) // find the man who signed this \n    .then(() => {\n      this.setState({\n        particularPost_Signer: \"\"\n      });\n      let signerID = this.state.particularPost_Post[0].offer_by;\n\n      if (signerID) {\n        axios.get(`https://aip-v1.ts.r.appspot.com/api/users/${signerID}`).then(response => {\n          let signerName = response.data.users[0].first_name + \" \" + response.data.users[0].last_name;\n          this.setState({\n            particularPost_Signer: signerName\n          });\n        }).catch(e => {\n          console.log(e);\n        });\n      }\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  showAddRewardsModal() {\n    this.setState({\n      addRewardsVisible: true\n    });\n  }\n\n  handleCancel() {\n    this.setState({\n      addRewardsVisible: false,\n      uploadVisible: false\n    });\n    window.location.reload();\n  }\n\n  onSearchKeyChange(e) {\n    if (e.target.value) {\n      this.setState({\n        searchKey: e.target.value\n      });\n    } else {\n      this.timerStart();\n    }\n  }\n\n  handleSearch() {\n    clearInterval(timer);\n    axios.get(`https://aip-v1.ts.r.appspot.com/api/posts?keyword=${this.state.searchKey}`).then(response => {\n      let posts = response.data.post;\n      this.setState({\n        allPosts: posts\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  handleSearchReward(ev, rewardType) {\n    let reward = rewardType;\n    clearInterval(timer);\n    axios.get(`https://aip-v1.ts.r.appspot.com/api/posts?reward=${reward}`).then(response => {\n      let posts = response.data.post;\n      this.setState({\n        allPosts: posts\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  handleSignAPost() {\n    let post_id = this.state.particularPost_Post[0].post_id;\n    let user_id = cookie.load(\"user_id\");\n    let data = {\n      \"post_id\": post_id,\n      \"user_id\": user_id,\n      \"proof\": 0\n    };\n    axios.put(\"https://aip-v1.ts.r.appspot.com/api/posts/apply_rewards\", data).then(response => {\n      let resMessage = response.data.message;\n      message.success(resMessage);\n      setTimeout(() => {\n        window.location.reload();\n      }, 2000);\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  showUploadModal() {\n    this.setState({\n      uploadVisible: true\n    });\n  }\n\n  render() {\n    let self = this;\n    let popContent = [];\n    let popContentIndex = 0;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      classNam: \"requestList\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"requestList-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Search, {\n      placeholder: \"Search\",\n      onChange: this.onSearchKeyChange.bind(this),\n      onSearch: this.handleSearch.bind(this),\n      style: {\n        width: \"30vh\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"requestList-header-rewardList\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 21\n      }\n    }, \"Search by rewards:\", /*#__PURE__*/React.createElement(Popover, {\n      content: \"Chocolate\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(GiChocolateBar, {\n      className: \"requestList-header-rewardList-item\",\n      onClick: ev => {\n        self.handleSearchReward(ev, \"Chocolate\");\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 56\n      }\n    })), /*#__PURE__*/React.createElement(Popover, {\n      content: \"Coffee\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FaCoffee, {\n      className: \"requestList-header-rewardList-item\",\n      onClick: ev => {\n        self.handleSearchReward(ev, \"Coffee\");\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 53\n      }\n    })), /*#__PURE__*/React.createElement(Popover, {\n      content: \"Cupcake\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(GiCupcake, {\n      className: \"requestList-header-rewardList-item\",\n      onClick: ev => {\n        self.handleSearchReward(ev, \"Cupcake\");\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 54\n      }\n    })), /*#__PURE__*/React.createElement(Popover, {\n      content: \"Mint\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FaLeaf, {\n      className: \"requestList-header-rewardList-item\",\n      onClick: ev => {\n        self.handleSearchReward(ev, \"Mint\");\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 51\n      }\n    })), /*#__PURE__*/React.createElement(Popover, {\n      content: \"Pizza\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FaPizzaSlice, {\n      className: \"requestList-header-rewardList-item\",\n      onClick: ev => {\n        self.handleSearchReward(ev, \"Pizza\");\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 52\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"requestList-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"requestList-body-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 21\n      }\n    }, this.state.allPosts.map(function (item) {\n      switch (item.status) {\n        case \"Open\":\n          return /*#__PURE__*/React.createElement(\"div\", {\n            className: \"requestList-item\",\n            onClick: self.handleItemSelect.bind(self, item),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 41\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: \"requestList-item-header\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 45\n            }\n          }, item.title), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"requestList-item-body\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(\"ul\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 49\n            }\n          }, /*#__PURE__*/React.createElement(\"li\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 53\n            }\n          }, /*#__PURE__*/React.createElement(UserOutlined, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 57\n            }\n          }), \"Poster:\", item.username), /*#__PURE__*/React.createElement(\"li\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 53\n            }\n          }, /*#__PURE__*/React.createElement(CalendarOutlined, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 57\n            }\n          }), \"Post Date:\", item.added_datetime.split(\"T\")[0]))), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"requestList-item-status-open\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 45\n            }\n          }, item.status));\n          break;\n\n        case \"Closed\":\n          return /*#__PURE__*/React.createElement(\"div\", {\n            className: \"requestList-item\",\n            onClick: self.handleItemSelect.bind(self, item),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 41\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: \"requestList-item-header\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 45\n            }\n          }, item.title), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"requestList-item-body\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(\"ul\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 49\n            }\n          }, /*#__PURE__*/React.createElement(\"li\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 53\n            }\n          }, /*#__PURE__*/React.createElement(UserOutlined, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 57\n            }\n          }), \"Poster:\", item.username), /*#__PURE__*/React.createElement(\"li\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 53\n            }\n          }, /*#__PURE__*/React.createElement(CalendarOutlined, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 57\n            }\n          }), \"Post Date:\", item.added_datetime.split(\"T\")[0]))), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"requestList-item-status-closed\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 45\n            }\n          }, item.status));\n          break;\n\n        case \"Assigned\":\n          return /*#__PURE__*/React.createElement(\"div\", {\n            className: \"requestList-item\",\n            onClick: self.handleItemSelect.bind(self, item),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 41\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: \"requestList-item-header\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 45\n            }\n          }, item.title), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"requestList-item-body\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 45\n            }\n          }, /*#__PURE__*/React.createElement(\"ul\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 49\n            }\n          }, /*#__PURE__*/React.createElement(\"li\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 53\n            }\n          }, /*#__PURE__*/React.createElement(UserOutlined, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 57\n            }\n          }), \"Poster:\", item.username), /*#__PURE__*/React.createElement(\"li\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 53\n            }\n          }, /*#__PURE__*/React.createElement(CalendarOutlined, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 57\n            }\n          }), \"Post Date:\", item.added_datetime.split(\"T\")[0]))), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"requestList-item-status-assigned\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 45\n            }\n          }, item.status));\n          break;\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"requestList-body-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"requestList-body-right-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 25\n      }\n    }, this.state.particularPost_Post[0].title), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"requestList-body-right-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(UserOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 39\n      }\n    }), \"Posted BY:\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"requestList-body-right-body-favoricon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 33\n      }\n    }, this.state.particularPost_Poster)), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 33\n      }\n    }, \"Status:\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 33\n      }\n    }, this.state.particularPost_Post[0].status)), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(UsergroupAddOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 39\n      }\n    }), \"Reward BY:\"), this.state.particularPost_adders.map(function (item) {\n      popContent = popContent.concat( /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 45\n        }\n      }, item.rewards.map(function (element) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 57\n          }\n        }, element.qty, \"      \", element.reward_name, \" \");\n      })));\n      popContentIndex++;\n      return /*#__PURE__*/React.createElement(Popover, {\n        content: popContent[popContentIndex - 1],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 49\n        }\n      }, item.name));\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(CalendarOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 39\n      }\n    }), \"Post Date:\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 33\n      }\n    }, this.state.particularPost_Post[0].added_datetime.split(\"T\")[0])), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(UserOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 39\n      }\n    }), \"Who is working on this:\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"requestList-body-right-body-favoricon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 33\n      }\n    }, this.state.particularPost_Signer)), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 33\n      }\n    }, \"Description:\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 33\n      }\n    }, \" \")), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        border: \"1px solid #E5E5E5\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 33\n      }\n    }, this.state.particularPost_Post[0].description))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"requestList-body-right-footer\",\n      style: {\n        display: this.state.displayButton\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      onClick: this.showAddRewardsModal.bind(this),\n      style: {\n        display: this.state.displayAddRewardButton\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 29\n      }\n    }, \"Edit Rewards\"), /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      onClick: this.handleSignAPost.bind(this),\n      style: {\n        display: this.state.displaySignPost\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 29\n      }\n    }, \"Make an Offer\"), /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      onClick: this.showUploadModal.bind(this),\n      style: {\n        display: this.state.displayUploadProof\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 29\n      }\n    }, \"Complete it\")))), /*#__PURE__*/React.createElement(Modal, {\n      title: \"Select the rewards you want to add to this public request\",\n      footer: [],\n      visible: this.state.addRewardsVisible,\n      onCancel: this.handleCancel.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(AddRewards, {\n      postID: this.state.particularPost_Post[0].post_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(Modal, {\n      title: \"Select and upload the proof image\",\n      footer: [],\n      visible: this.state.uploadVisible,\n      onCancel: this.handleCancel.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(CompletePost, {\n      postID: this.state.particularPost_Post[0].post_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 25\n      }\n    })));\n  }\n\n}\n\nexport default RequestList;","map":{"version":3,"sources":["/Users/vrajmehta/Downloads/Downloads/React:JavaScript/AIP_IOU/client/src/components/requestList/RequestList.js"],"names":["React","Popover","Button","Modal","Input","message","FaCoffee","GiChocolateBar","GiCupcake","FaLeaf","FaPizzaSlice","UserOutlined","UsergroupAddOutlined","CalendarOutlined","AddRewards","axios","cookie","CompletePost","Search","timer","undefined","RequestList","Component","constructor","props","timerStart","setInterval","responseData","get","then","response","data","post","setState","allPosts","catch","e","console","log","state","login","displayButton","particularPost_Post","particularPost_Rewards","searchKey","particularPost_Poster","particularPost_Signer","particularPost_adders","RewardsEnumnation","addRewardsVisible","uploadVisible","displayAddRewardButton","displaySignPost","displayUploadProof","componentDidMount","userID","load","rewards","handleItemSelect","item","selectedPostID","post_id","loggedUserID","offer_by","status","posterName","posterID","added_by","users","first_name","last_name","forEach","adderID","user_id","adderRewards","adderName","concat","signerID","signerName","showAddRewardsModal","handleCancel","window","location","reload","onSearchKeyChange","target","value","handleSearch","clearInterval","posts","handleSearchReward","ev","rewardType","reward","handleSignAPost","put","resMessage","success","setTimeout","showUploadModal","render","self","popContent","popContentIndex","bind","width","map","title","username","added_datetime","split","element","qty","reward_name","name","border","description","display"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Popover, Button, Modal, Input, message } from 'antd';\nimport { FaCoffee } from 'react-icons/fa';\nimport { GiChocolateBar, GiCupcake } from 'react-icons/gi';\nimport { FaLeaf, FaPizzaSlice } from 'react-icons/fa';\nimport './RequestList.css';\nimport { UserOutlined, UsergroupAddOutlined, CalendarOutlined } from '@ant-design/icons'\nimport AddRewards from \"../AddRewards/Index\";\nimport axios from 'axios';\nimport cookie from 'react-cookies';\nimport CompletePost from '../CompletePost/CompletePost';\n\nconst { Search } = Input;\nlet timer = undefined;\n\nclass RequestList extends React.Component{\n    \n    constructor(props){\n        super(props);\n        this.state={\n            login:false,\n            displayButton:false,\n\n            allPosts: [],\n            particularPost_Post:[{\n                \"post_id\": \"\",\n                \"added_by\": \"\",\n                \"offer_by\": \"\",\n                \"title\": \"\",\n                \"description\": \"\",\n                \"added_datetime\": \"\",\n                \"status\": \"\",\n                \"proof\": false\n            }],\n            particularPost_Rewards:[],\n            searchKey:'',\n            particularPost_Poster:\"\",\n            particularPost_Signer:\"\",\n            particularPost_adders:[],\n            RewardsEnumnation:[],\n            addRewardsVisible:false,\n            uploadVisible:false,\n\n            displayAddRewardButton:\"none\",\n            displaySignPost:\"none\",\n            displayUploadProof:\"none\"\n\n        }\n    }\n    // Timer for refresh the post list\n    timerStart = () =>  {\n        timer = setInterval(() => {\n            let responseData = [];\n            axios.get('https://aip-v1.ts.r.appspot.com/api/posts')\n            .then(response => {\n                // receive response Data\n                responseData=response.data.post;\n\n                // Parse Data into local states\n                this.setState({\n                    allPosts:responseData\n                })\n            })\n            .catch((e) => {\n                console.log(e)\n            });\n        },2000);  \n    }\n\n    componentDidMount(){\n        // get all posts \n        let responseData = [];\n        axios.get('https://aip-v1.ts.r.appspot.com/api/posts')\n        .then(response => {\n            // receive response Data\n            responseData=response.data.post;\n\n            // Parse Data into local states\n            this.setState({\n                allPosts:responseData\n            })\n            console.log(\"ping\");\n        })\n        .catch((e) => {\n            console.log(e)\n        })\n        \n        this.timerStart();\n         \n        // get login status from cookie\n        let userID = cookie.load(\"user_id\");\n        if(userID){\n            this.setState({\n                displayButton:\"block\"\n            });\n        }else{\n            this.setState({\n                displayButton:\"none\"\n            });\n        }  \n\n        // get the reward enumation\n        let rewards = [];\n        axios.get('https://aip-v1.ts.r.appspot.com/api/rewards')\n        .then(response => {\n            rewards = response.data;\n        })\n        .catch((e) => {\n            console.log(e)\n        })\n        this.setState({\n            RewardsEnumnation:rewards\n        });\n    }\n\n    handleItemSelect(item){\n        let particularPost_Post;\n        let particularPost_Rewards;\n        let selectedPostID=item.post_id;  \n        // retrieve the selected Post data      \n        axios.get(`https://aip-v1.ts.r.appspot.com/api/posts/${selectedPostID}`)\n        .then(response => {\n            particularPost_Post = response.data.post;\n            particularPost_Rewards = response.data.rewards;\n            // parse data into local states\n            this.setState({\n                particularPost_Post:particularPost_Post,\n                particularPost_Rewards:particularPost_Rewards\n            });\n            \n            // decide which button to show in the detail page\n            this.setState({\n                displayAddRewardButton:\"none\",\n                displaySignPost:\"none\",\n                displayUploadProof:\"none\"\n            });\n            let loggedUserID=cookie.load(\"user_id\");\n            if(this.state.particularPost_Post[0].offer_by == null){\n                this.setState({\n                    displaySignPost:\"block\",\n                    displayAddRewardButton:\"block\"\n                });\n            }else if(this.state.particularPost_Post[0].offer_by == loggedUserID\n                    && this.state.particularPost_Post[0].status != \"Closed\"){\n                this.setState({\n                    displayUploadProof:\"block\",\n                    displayAddRewardButton:\"none\"\n                });\n            }else if(this.state.particularPost_Post[0].status == \"Closed\"){\n                this.setState({\n                    displayAddRewardButton:\"none\",\n                    displaySignPost:\"none\",\n                    displayUploadProof:\"none\"\n                });\n            }\n\n        })\n        \n        .then( () => {\n            // find the post man\n            let posterName;\n            let posterID = this.state.particularPost_Post[0].added_by;\n            axios.get(`https://aip-v1.ts.r.appspot.com/api/users/${posterID}`)\n            .then(response =>{\n                posterName = response.data.users[0].first_name\n                            + \" \" +response.data.users[0].last_name;\n                this.setState({                \n                    particularPost_Poster:posterName\n                })\n            })\n            .catch((e) => {\n                console.log(e)\n            })                       \n        })\n        .then(()=>{\n            // find people who add rewards\n            // clear old particularPost_adders\n            this.setState({\n                particularPost_adders:[]\n            });\n            let rewards = this.state.particularPost_Rewards\n            // [{\n            //     user_id: \"\"\n            //     rewards:[\n            //         {\n            //             reward_name:\"\",qty:int\n            //         },\n            //         {\n            //             reward_name:\"\",qty:int\n            //         }\n            //     ]\n            // }]\n            rewards.forEach(item => {\n                let adderID = item.user_id;\n                let adderRewards = item.rewards;\n                axios.get(`https://aip-v1.ts.r.appspot.com/api/users/${adderID}`)\n                .then(response =>{\n                    let adderName = response.data.users[0].first_name\n                                + \" \" +response.data.users[0].last_name;  \n                    let particularPost_adders = this.state.particularPost_adders;                  \n                    this.setState({\n                        particularPost_adders:particularPost_adders.concat({\n                            \"name\":adderName,\n                            \"rewards\":adderRewards\n                        })\n                    })\n                })\n                .catch((e) => {\n                    console.log(e)\n                })\n            });             \n        })\n        // find the man who signed this \n        .then(() =>{\n            this.setState({\n                particularPost_Signer:\"\"\n            });\n            let signerID = this.state.particularPost_Post[0].offer_by\n            if(signerID){\n                axios.get(`https://aip-v1.ts.r.appspot.com/api/users/${signerID}`)\n                .then(response =>{\n                    let signerName = response.data.users[0].first_name\n                                + \" \" +response.data.users[0].last_name;\n                    this.setState({                \n                        particularPost_Signer:signerName\n                    })\n                })\n                .catch((e) => {\n                    console.log(e)\n                })\n            }\n        })\n        .catch((e) => {\n            console.log(e)\n        })\n        \n    }\n    \n    showAddRewardsModal(){\n        this.setState({\n            addRewardsVisible:true\n        });\n    }\n    handleCancel(){\n        this.setState({\n            addRewardsVisible:false,\n            uploadVisible:false\n        });\n        window.location.reload();\n    }\n\n    onSearchKeyChange(e){\n        if(e.target.value){\n            this.setState({\n                searchKey:e.target.value\n            })\n        }else{\n            this.timerStart();\n        }\n        \n    }\n    handleSearch(){\n        clearInterval(timer);\n        axios.get(`https://aip-v1.ts.r.appspot.com/api/posts?keyword=${this.state.searchKey}`)\n        .then(response =>{\n            let posts = response.data.post;                             \n            this.setState({\n                allPosts:posts\n            })\n        })\n        .catch((e) => {\n            console.log(e)\n        })    \n    }\n    handleSearchReward(ev,rewardType){\n        let reward = rewardType;\n        clearInterval(timer);\n        axios.get(`https://aip-v1.ts.r.appspot.com/api/posts?reward=${reward}`)\n        .then(response =>{\n            let posts = response.data.post;                             \n            this.setState({\n                allPosts:posts\n            })\n        })\n        .catch((e) => {\n            console.log(e)\n        })    \n    }\n\n    handleSignAPost(){        \n        let post_id = this.state.particularPost_Post[0].post_id;\n        let user_id = cookie.load(\"user_id\");\n        let data = {   \n            \"post_id\": post_id,\n            \"user_id\": user_id,\n            \"proof\": 0\n        }\n        axios.put(\"https://aip-v1.ts.r.appspot.com/api/posts/apply_rewards\",data)\n        .then(response =>{\n            let resMessage = response.data.message;\n            message.success(resMessage);\n            setTimeout(() => {\n                window.location.reload();\n            },2000);     \n        })\n        .catch((e) => {\n            console.log(e)\n        })\n    }\n    showUploadModal(){\n        this.setState({\n            uploadVisible:true\n        });\n    }\n\n    render(){\n        let self = this;\n        let popContent = [];\n        let popContentIndex =0;\n        return(\n            <div classNam=\"requestList\">\n                <div className=\"requestList-header\">\n                    <Search\n                        placeholder=\"Search\"\n                        onChange={this.onSearchKeyChange.bind(this)}\n                        onSearch={this.handleSearch.bind(this)}\n                        style={{ width: \"30vh\" }}\n                    />\n                    <div className=\"requestList-header-rewardList\"> \n                        Search by rewards:                       \n                        <Popover content={\"Chocolate\"}><GiChocolateBar  className=\"requestList-header-rewardList-item\"\n                                         onClick={(ev)=>{self.handleSearchReward(ev,\"Chocolate\")}}/></Popover>\n                        <Popover content={\"Coffee\"}><FaCoffee   className=\"requestList-header-rewardList-item\"\n                                    onClick={(ev)=>{self.handleSearchReward(ev,\"Coffee\")}}/></Popover>\n                        <Popover content={\"Cupcake\"}><GiCupcake   className=\"requestList-header-rewardList-item\"\n                                    onClick={(ev)=>{self.handleSearchReward(ev,\"Cupcake\")}}/></Popover>\n                        <Popover content={\"Mint\"}><FaLeaf   className=\"requestList-header-rewardList-item\"\n                                    onClick={(ev)=>{self.handleSearchReward(ev,\"Mint\")}}/></Popover>\n                        <Popover content={\"Pizza\"}><FaPizzaSlice   className=\"requestList-header-rewardList-item\"\n                                        onClick={(ev)=>{self.handleSearchReward(ev,\"Pizza\")}}/></Popover>\n                    </div>\n                </div>\n                <div className=\"requestList-body\">\n                    <div className=\"requestList-body-left\">\n                        {this.state.allPosts.map(function(item){\n                            switch (item.status) {\n                                case \"Open\":\n                                    return(\n                                        <div \n                                            className=\"requestList-item\"\n                                            onClick={self.handleItemSelect.bind(self,item)}>      \n                                            <div className=\"requestList-item-header\">{item.title}</div>\n                                            <div className=\"requestList-item-body\">\n                                                <ul>\n                                                    <li><UserOutlined />Poster:{item.username}</li>                                            \n                                                    <li><CalendarOutlined />Post Date:{item.added_datetime.split(\"T\")[0]}</li>\n                                                </ul>\n                                            </div>\n                                            <div className=\"requestList-item-status-open\">{item.status}</div>\n                                        </div>\n                                    )\n                                    break;\n                                case \"Closed\":\n                                    return(\n                                        <div \n                                            className=\"requestList-item\"\n                                            onClick={self.handleItemSelect.bind(self,item)}>      \n                                            <div className=\"requestList-item-header\">{item.title}</div>\n                                            <div className=\"requestList-item-body\">\n                                                <ul>\n                                                    <li><UserOutlined />Poster:{item.username}</li>                                            \n                                                    <li><CalendarOutlined />Post Date:{item.added_datetime.split(\"T\")[0]}</li>\n                                                </ul>\n                                            </div>\n                                            <div className=\"requestList-item-status-closed\">{item.status}</div>\n                                        </div>\n                                    )\n                                    break;\n                                case \"Assigned\":\n                                    return(\n                                        <div \n                                            className=\"requestList-item\"\n                                            onClick={self.handleItemSelect.bind(self,item)}>      \n                                            <div className=\"requestList-item-header\">{item.title}</div>\n                                            <div className=\"requestList-item-body\">\n                                                <ul>\n                                                    <li><UserOutlined />Poster:{item.username}</li>                                            \n                                                    <li><CalendarOutlined />Post Date:{item.added_datetime.split(\"T\")[0]}</li>\n                                                </ul>\n                                            </div>\n                                            <div className=\"requestList-item-status-assigned\">{item.status}</div>\n                                        </div>\n                                    )\n                                    break;\n                                \n                            }\n                        })}\n                    </div>\n                    <div className=\"requestList-body-right\">\n                        <div className=\"requestList-body-right-header\">\n                            {this.state.particularPost_Post[0].title}                            \n                        </div>\n                        <div className=\"requestList-body-right-body\">\n                            <div>\n                                <span><UserOutlined />Posted BY:</span>\n                                <span className=\"requestList-body-right-body-favoricon\">{this.state.particularPost_Poster}</span>\n                            </div>\n                            <div>\n                                <span>Status:</span>\n                                <span>{this.state.particularPost_Post[0].status}</span>\n                            </div>                          \n                            <div>\n                                <span><UsergroupAddOutlined />Reward BY:</span>                                \n                                    {this.state.particularPost_adders.map(function(item){\n                                        popContent = popContent.concat(\n                                            <div>\n                                                {item.rewards.map(function(element){\n                                                    return(\n                                                        <p>{element.qty}      {element.reward_name} </p>\n                                                    )\n                                                })}\n                                            </div>\n                                        );\n                                        popContentIndex++;\n                                        return(\n                                            <Popover content = {popContent[popContentIndex-1]}>\n                                                <span>{item.name}</span>\n                                            </Popover>                                            \n                                        )\n                                    })}\n                            </div>\n                            <div>\n                                <span><CalendarOutlined />Post Date:</span>\n                                <span>{this.state.particularPost_Post[0].added_datetime.split(\"T\")[0]}</span>\n                            </div>                           \n                            <div>\n                                <span><UserOutlined />Who is working on this:</span>\n                                <span className=\"requestList-body-right-body-favoricon\">{this.state.particularPost_Signer}</span>\n                            </div>\n                            <div>\n                                <span>Description:</span>\n                                <span> </span>\n                            </div>     \n                            <div style={{border:\"1px solid #E5E5E5\"}}>\n                                <p>{this.state.particularPost_Post[0].description}</p>\n                            </div>                    \n                        </div>\n                        <div className=\"requestList-body-right-footer\" \n                            style={{display:this.state.displayButton}}> \n                            <Button type=\"primary\" onClick={this.showAddRewardsModal.bind(this)} style={{display:this.state.displayAddRewardButton}}>Edit Rewards</Button>\n                            <Button type=\"primary\" onClick={this.handleSignAPost.bind(this)} style={{display:this.state.displaySignPost}}>Make an Offer</Button>\n                            <Button type=\"primary\" onClick={this.showUploadModal.bind(this)} style={{display:this.state.displayUploadProof}}>Complete it</Button>\n                        </div>\n                    </div>\n                </div>\n                <Modal\n                    title=\"Select the rewards you want to add to this public request\"\n                    footer={[]}\n                    visible={this.state.addRewardsVisible}\n                    onCancel={this.handleCancel.bind(this)}>\n                        <AddRewards \n                            postID={this.state.particularPost_Post[0].post_id}/>\n                </Modal>                 \n                <Modal\n                    title=\"Select and upload the proof image\"\n                    footer={[]}\n                    visible={this.state.uploadVisible}\n                    onCancel={this.handleCancel.bind(this)}>\n                        <CompletePost \n                            postID={this.state.particularPost_Post[0].post_id}/>\n                </Modal>          \n            </div>\n        );\n    }\n\n}\n\nexport default RequestList;"]},"metadata":{},"sourceType":"module"}